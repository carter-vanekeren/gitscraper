#!/usr/bin/env ruby
<<<<<<< HEAD
load 'lib/gitscraper.rb'

=======
################################################################################
# Copyright Carter Van Ekeren - 2019								    #
# Email : vanek015@umn.edu
# File : main.rb/gitscraper							         #
################################################################################
load 'lib/gitscraper.rb'

################################################################################
# Main program driver											    #
################################################################################
>>>>>>> refactor/scraper
# Set exit variable
quit = false
# Set help string
help =
"==================================================
The following are accepted commands:
  quit           : Exit the program
  help           : Show all available commands
  show more      : Show five more trending repos
  show all       : Show all trending repos
  visit <number> : Open GitHub repository in default browser
  	          (number is displayed next to the name of repo)
 =================================================="

# Set up GitScraper and scrape page
gitscraper = GitScraper.new("https://github.com/trending", "GitScraper")
gitscraper.setUp
gitscraper.scrape

# Enter command loop
puts "GitScraper$ What would you like to do? (type 'help' for commands)\n"
while !quit do
	# Command prompt
	print "GitScraper$ "
	# Get command and decide what to do with it
	command = gets.strip
	case command
	when "help"
		puts help
	when "quit"
		quit = true
		puts "Have a great day!"
	when "show all"
		gitscraper.show_all()
	when "show more"
		gitscraper.show_five()
	when /(visit\s\d+)/ # Regex with format 'visit (some number)'
		# Get integer from regular expression
		index = command[/\d+/].to_i - 1
		gitscraper.visitPage(index)
	else
		puts "I do not recognize that command."
		puts "Type 'help' for command options."
	end
end
